{"version":3,"sources":["assets/img/logo.png","redux/users/actions.js","redux/store/initialState.js","redux/users/reducers.js","redux/products/actions.js","redux/products/reducers.js","assets/theme.js","redux/users/selector.js","firebase/index.js","firebase/config.js","components/Products/CartListItem.jsx","components/UIkit/TextInput.jsx","components/UIkit/PrimaryButton.jsx","components/UIkit/GreyButton.jsx","components/UIkit/SelectBox.jsx","components/UIkit/TextDetail.jsx","templates/CartList.jsx","components/Products/imagePreview.jsx","components/Products/imageArea.jsx","components/Products/SetSizeArea.jsx","redux/products/operations.js","components/Products/ProductCard.jsx","components/Products/ImageSwiper.jsx","components/Products/SizeTable.jsx","components/Products/LikeListItem.jsx","components/Products/OrderHistoryItem.jsx","components/Products/OrderedProducts.jsx","templates/LikeList.jsx","redux/products/selector.js","templates/ProductList.jsx","templates/ProductEdit.jsx","templates/ProductDetail.jsx","redux/users/operations.js","templates/SignIn.jsx","templates/SignUp.jsx","templates/Reset.jsx","templates/OrderConfirm.jsx","templates/OrderHistory.jsx","Auth.jsx","Router.jsx","components/Header/Header.jsx","components/Header/HeaderMenus.jsx","components/Header/ClosableDrawer.jsx","App.jsx","serviceWorker.js","index.js","redux/store/store.js","assets/img/no_image.png"],"names":["module","exports","fetchProductsInCartAction","products","type","payload","fetchProductsInLikeAction","signInAction","userState","isSignedIn","role","uid","username","initialState","list","keyword","users","cart","like","orders","UserReducer","state","action","fetchKeywordAction","ProductsReducer","theme","createMuiTheme","palette","primary","light","main","dark","contrastText","secondary","grey","50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700","usersSelector","getOrdersHistory","createSelector","getSignedIn","getProductsInCart","getProductsInLike","getUserId","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","db","firestore","storage","FirebaseTimestamp","functions","Timestamp","useStyles","makeStyles","height","image","objectFit","margin","width","text","CartListItem","props","classes","selector","useSelector","product","images","path","price","toLocaleString","name","size","ListItem","className","ListItemAvatar","src","alt","ListItemText","IconButton","onClick","id","cartId","collection","doc","delete","Divider","TextInput","TextField","fullWidth","label","multiline","required","rows","value","onChange","button","backgroundColor","color","fontSize","marginBottom","PrimaryButton","Button","variant","GreyButton","formControl","minWidth","SelectBox","FormControl","InputLabel","Select","event","select","target","options","map","option","MenuItem","key","row","display","flexFlow","marginLeft","marginRight","fontWeight","TextDetail","root","maxWidth","CartList","dispatch","useDispatch","productInCart","goToOrder","useCallback","push","backToHome","List","length","ImagePreview","icon","ImageArea","deleteImage","a","window","confirm","newImages","filter","setImages","ref","child","uploadImage","file","files","blob","Blob","S","fileName","Array","from","crypto","getRandomValues","Uint32Array","n","join","uploadTask","put","then","snapshot","getDownloadURL","downloadURL","newImage","prevState","checkIcon","float","iconCell","SetSizeArea","useState","index","setIndex","setSize","quantity","setQuantity","inputSize","inputQuantity","useMemo","sizes","TableContainer","component","Paper","Table","TableHead","TableRow","TableCell","TableBody","item","i","editSize","deleteIndex","newSizes","setSizes","deleteSize","multikine","addSize","productsRef","breakpoints","down","up","content","padding","textAlign","paddingBottom","media","paddingTop","position","ProductCard","anchorEl","setAnchorEl","handleClose","NoImages","Card","CardMedia","CardContent","Typography","currentTarget","Menu","keepMounted","open","Boolean","onClose","getState","nextProducts","ImageSwiper","pagination","el","clickable","dynamicBullets","navigation","nextEl","prevEl","loop","params","NoImage","SizeTable","scope","addProduct","addProductLike","LikeListItem","likeId","OrderHistoryItem","date","order","orderedDatetime","updated_at","toDate","getFullYear","getMonth","slice","getDate","getHours","getMinutes","getSeconds","shippingDate","dateToString","shipping_date","amount","background","OrderedProducts","goToProoductDetail","LikeList","productInLike","productsSelector","getProducts","getKeyword","ProductList","query","router","location","search","gender","test","split","category","useEffect","orderBy","where","get","snapshots","productList","forEach","data","fetchProducts","filters","indexOf","ProductEdit","pathname","setName","description","setDiscription","setCategory","categories","setCategories","setGender","setPrice","InputName","InputDiscription","InputPrice","discription","timestamp","now","parseInt","created_at","set","merge","catch","error","Error","saveProduct","sliderBox","detail","ProductDetail","setProduct","selectedSize","addedProduct","added_at","productId","cartRef","likeRef","HTMLReactParser","replace","SignIn","email","setEmail","password","setPassword","inputEmail","inputPassword","alert","signInWithEmailAndPassword","result","user","signIn","SignUp","setUsername","confirmPassword","setConfirmPassword","inputUsername","inputConfirmPassword","confirmpassword","createUserWithEmailAndPassword","userInitialData","create_at","signUp","Reset","sendPasswordResetEmail","resetPassword","detailBox","orderBox","border","borderRadius","boxShadow","OrderConfirm","productsInCart","subtotal","reduce","sum","shippingFee","tax","total","userRef","soldOutProducts","batch","updatedSizes","update","errorMessage","commit","orderRef","fromDate","Date","setDate","history","orderList","OrderHistory","Auth","children","onAuthStateChanged","Router","exact","flexGrow","menuBar","toolBar","iconButtons","Header","setOpen","handleDrawerToggle","AppBar","potition","logo","HeaderMenus","productsInLike","unsubscribe","onSnapshot","docChanges","change","findIndex","Badge","badgeContent","drawer","flexShrink","toolbar","mixins","drawerPaper","searchField","alignItems","ClosableDrawer","container","setKeyword","inputKeyword","selectMenu","func","setFilters","menus","fetchKeyword","Drawer","anchor","e","paper","ModalProps","menu","ListItemIcon","signOut","App","hostname","match","History","store","reduxCretateStore","combineReducers","connectRouter","applyMiddleware","routerMiddleware","thunk","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","console","message"],"mappings":"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","file":"static/js/main.964609fb.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.23dd96cd.png\";","export const FETCH_ORDER_HISTORY = \"FETCH_ORDER_HISTORY\";\n\nexport const fetchOrdersHistoryAction = (history) => {\n    return {\n        type: \"FETCH_ORDER_HISTORY\",\n        payload: history\n    }\n};\n\nexport const FETCH_PRODUCT_IN_CART = \"FETCH_PRODUCT_IN_CART\";\n\nexport const fetchProductsInCartAction = (products) => {\n    return {\n        type: \"FETCH_PRODUCT_IN_CART\",\n        payload: products\n    }\n};\n\nexport const FETCH_PRODUCT_IN_LIKE = \"FETCH_PRODUCT_IN_LIKE\";\n\nexport const fetchProductsInLikeAction = (products) => {\n    return {\n        type: \"FETCH_PRODUCT_IN_LIKE\",\n        payload: products\n    }\n};\n\nexport const SIGN_IN = \"SIGN_IN\";\n\nexport const signInAction = (userState) => {\n    return {\n        type: \"SIGN_IN\",\n        payload: {\n            isSignedIn: true,\n            role: userState.role,\n            uid: userState.uid,\n            username: userState.username\n        }\n    }\n};\n\nexport const SIGN_OUT = \"SIGN_OUT\";\n\nexport const signOutAction = () => {\n    return {\n        type: \"SIGN_OUT\",\n        payload: null\n    }\n};","const initialState = {\n    products: {\n        list: [],\n        keyword: \"\"\n    },\n    users: {\n        cart: [],\n        like: [],\n        isSignedIn: false,\n        orders: [],\n        role: \"\",\n        uid: \"\",\n        username: \"\"\n    },\n};\n\nexport default initialState;","import * as Actions from './actions';\nimport initialState from '../store/initialState';\n\nexport const UserReducer = (state = initialState.users, action) => {\n    switch(action.type){\n        case Actions.FETCH_ORDER_HISTORY:\n            return{\n                ...state,\n                orders: [...action.payload]\n            }\n        case Actions.FETCH_PRODUCT_IN_CART:\n            return{\n                ...state,\n                cart: [...action.payload]\n            }\n        case Actions.FETCH_PRODUCT_IN_LIKE:\n            return{\n                ...state,\n                like: [...action.payload]\n            }\n        case Actions.SIGN_IN:\n            return{\n                ...state,\n                ...action.payload\n            }\n        case Actions.SIGN_OUT:\n            return{\n                ...action.payload\n            }\n        default:\n            return state\n    }\n}","export const DELETE_PRODUCT = 'DELETE_PRODUCT';\nexport const deleteProductAction = (products) => {\n    return{\n        type: 'FETCH_PRODUCTS',\n        payload: products\n    }\n};\n\nexport const FETCH_PRODUCTS = \"FETCH_PRODUCTS\";\nexport const fetchProductsAction = (products) => {\n    return{\n        type: 'FETCH_PRODUCTS',\n        payload: products\n    }\n};\n\nexport const FETCH_KEYWORD = \"FETCH_KEYWORD\";\nexport const fetchKeywordAction = (keyword) => {\n    return{\n        type: 'FETCH_KEYWORD',\n        payload: keyword\n    }\n};","import * as Actions from './actions';\nimport initialState from '../store/initialState';\n\nexport const ProductsReducer = (state = initialState.products, action) => {\n    switch(action.type){\n        case Actions.DELETE_PRODUCT:\n            return {\n                ...state,\n                list: [...action.payload]\n            };\n        case Actions.FETCH_PRODUCTS:\n            return {\n                ...state,\n                list: [...action.payload]\n            };\n        case Actions.FETCH_KEYWORD:\n            return {\n                ...state,\n                keyword: action.payload\n            };\n        default:\n            return state\n    }\n}","import { createMuiTheme } from '@material-ui/core/styles';\n\n// Pick colors on https://material.io/resources/color/#!/\n\nexport const theme = createMuiTheme({\n  palette: {\n    primary: {\n      light: '#88ffff',\n      main: '#4dd0e1',\n      dark: '#009faf',\n      contrastText: '#000',\n    },\n    secondary: {\n      light: '#ffff81',\n      main: '#ffd54f',\n      dark: '#c8a415',\n      contrastText: '#000',\n    },\n    grey: {\n      50: \"#fafafa\",\n      100: \"#f5f5f5\",\n      200: \"#eeeeee\",\n      300: \"#e0e0e0\",\n      400: \"#bdbdbd\",\n      500: \"#9e9e9e\",\n      600: \"#757575\",\n      700: \"#616161\",\n      800: \"#424242\",\n      900: \"#212121\",\n      A100: \"#d5d5d5\",\n      A200: \"#aaaaaa\",\n      A400: \"#303030\",\n      A700: \"#616161\"\n    }\n  },\n});","import { createSelector } from 'reselect';\n\nconst usersSelector = (state) => state.users;\n\nexport const getOrdersHistory = createSelector(\n    [usersSelector],\n    state => state.orders\n)\n\nexport const getSignedIn = createSelector(\n    [usersSelector],\n    state => state.isSignedIn\n)\n\nexport const getProductsInCart = createSelector(\n    [usersSelector],\n    state => state.cart\n)\n\nexport const getProductsInLike = createSelector(\n    [usersSelector],\n    state => state.like\n)\n\nexport const getUserId = createSelector(\n    [usersSelector],\n    state => state.uid\n)\n\nexport const getUsername = createSelector(\n    [usersSelector],\n    state => state.username\n)","import firebase from 'firebase/app';\nimport 'firebase/auth'\nimport 'firebase/firestore'\nimport 'firebase/storage'\nimport 'firebase/functions'\nimport { firebaseConfig } from './config';\n\nfirebase.initializeApp(firebaseConfig);\nexport const auth = firebase.auth();\nexport const db = firebase.firestore();\nexport const storage = firebase.storage();\nexport const functions = firebase.functions();\nexport const FirebaseTimestamp = firebase.firestore.Timestamp;","export const firebaseConfig = {\n    apiKey: \"AIzaSyCvPVElHTdiJZZuPhtROG7JFs7p5sy017s\",\n    authDomain: \"ec-app0619.firebaseapp.com\",\n    databaseURL: \"https://ec-app0619.firebaseio.com\",\n    projectId: \"ec-app0619\",\n    storageBucket: \"ec-app0619.appspot.com\",\n    messagingSenderId: \"508962349338\",\n    appId: \"1:508962349338:web:5898069f56e3335a1dcca3\",\n    measurementId: \"G-C9GB7GD6C0\"\n};","import React from 'react';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport { makeStyles } from '@material-ui/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport IconButton from '@material-ui/core/IconButton';\nimport { useSelector } from 'react-redux';\nimport { getUserId } from '../../redux/users/selector';\nimport { db } from '../../firebase/index';\n\nconst useStyles = makeStyles({\n    list: {\n        height: 128,\n    },\n    image: {\n        objectFit: 'cover',\n        margin: 16,\n        height: 96,\n        width: 96\n    },\n    text: {\n        width: '100%'\n    }\n});\n\nconst CartListItem = (props) => {\n    const classes = useStyles();\n    const selector = useSelector((state) => state);\n    const uid = getUserId(selector);\n\n    const image = props.product.images[0].path;\n    const price = props.product.price.toLocaleString();\n    const name = props.product.name;\n    const size = props.product.size;\n\n    const removeProductFromCart = (id) => {\n        return db.collection('users').doc(uid).collection('cart').doc(id).delete()\n    };\n\n    return(\n        <>\n            <ListItem className={classes.list}>\n                <ListItemAvatar>\n                    <img className={classes.image} src={image} alt=\"商品画像\" />\n                </ListItemAvatar>\n                <div className={classes.text}>\n                    <ListItemText primary={name} secondary={\"サイズ：\" + size} />\n                    <ListItemText primary={'¥' + price} />\n                </div>\n                <IconButton onClick={() => removeProductFromCart(props.product.cartId)}>\n                    <DeleteIcon />\n                </IconButton>\n            </ListItem>\n            <Divider />\n        </>\n    );\n}\n\nexport default CartListItem;","import React from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nconst TextInput = (props) => {\n    return (\n        <TextField\n            fullWidth={props.fullWidth}\n            label={props.label}\n            margin=\"dense\"\n            multiline={props.multiline}\n            required={props.required}\n            rows={props.rows}\n            value={props.value}\n            type={props.type}\n            onChange={props.onChange}\n        />\n    )\n}\n\nexport default TextInput;","import React from 'react';\nimport Button from '@material-ui/core/Button'\nimport { makeStyles } from '@material-ui/styles'\n\nconst useStyles = makeStyles({\n    button:{\n        backgroundColor: \"#4dd0e1\",\n        color: \"#fff\",\n        fontSize: 16,\n        height: 48,\n        marginBottom: 16,\n        width: 256\n    }\n})\n\nconst PrimaryButton = (props) => {\n    const classes = useStyles();\n\n    return(\n        <Button className={classes.button} variant=\"contained\" onClick={() => props.onClick()}>\n            {props.label}\n        </Button>\n    )\n}\n\nexport default PrimaryButton;","import React from 'react';\nimport Button from '@material-ui/core/Button'\nimport { makeStyles } from '@material-ui/styles'\n\nconst useStyles = makeStyles((theme) => ({\n    button:{\n        backgroundColor: theme.palette.grey['300'],\n        fontSize: 16,\n        height: 48,\n        marginBottom: 16,\n        width: 256\n    }\n}))\n\nconst GreyButton = (props) => {\n    const classes = useStyles();\n\n    return(\n        <Button className={classes.button} variant=\"contained\" onClick={() => props.onClick()}>\n            {props.label}\n        </Button>\n    )\n}\n\nexport default GreyButton;","import React from 'react';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport { makeStyles } from '@material-ui/styles'\n\nconst useStyles = makeStyles({\n    formControl: {\n        marginBottom: 16,\n        minWidth: 128,\n        width: \"100%\"\n    }\n});\n\nconst SelectBox = (props) => {\n    const classes = useStyles();\n\n    return(\n        <FormControl className={classes.formControl}>\n            <InputLabel>{props.label}</InputLabel>\n            <Select\n                required={props.required} value={props.value} onChange={(event) => props.select(event.target.value)}\n            >\n                {props.options.map((option) => (\n                    <MenuItem key={option.id} value={option.id}>{option.name}</MenuItem>\n                ))}\n            </Select>\n        </FormControl>\n    )\n}\n\nexport default SelectBox;","import React from 'react';\nimport { makeStyles } from '@material-ui/styles';\n\nconst useStyles = makeStyles({\n    row: {\n        display: 'flex',\n        flexFlow: 'row wrap',\n        marginBottom: 16\n    },\n    label: {\n        marginLeft: 0,\n        marginRight: 'auto'\n    },\n    value: {\n        fontWeight: 600,\n        marginLeft: 'auto',\n        marginRight: 0\n    }\n})\n\nconst TextDetail = (props) => {\n    const classes = useStyles();\n\n    return(\n        <div className={classes.row}>\n            <div className={classes.label}>\n                {props.label}\n            </div>\n            <div className={classes.value}>\n                {props.value}\n            </div>\n        </div>\n    )\n}\n\nexport default TextDetail;","import React, { useCallback } from 'react';\nimport List from '@material-ui/core/List';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getProductsInCart } from '../redux/users/selector';\nimport CartListItem from '../components/Products/CartListItem'\nimport { GreyButton, PrimaryButton } from '../components/UIkit';\nimport { push } from 'connected-react-router';\nimport { makeStyles } from '@material-ui/styles';\n\nconst useStyles = makeStyles({\n    root: {\n        margin: '0 auto',\n        maxWidth: 512,\n        width: '100%'\n    }\n});\n\nconst CartList = () => {\n    const dispatch = useDispatch();\n    const classes = useStyles();\n    const selector = useSelector((state) => state);\n    const productInCart = getProductsInCart(selector);\n\n    const goToOrder = useCallback(() => {\n        dispatch(push('/order/confirm'))\n    },[dispatch]);\n\n    const backToHome = useCallback(() => {\n        dispatch(push('/'))\n    },[dispatch]);\n\n    return(\n        <section className=\"c-section-wrapin\">\n            <h2 className=\"u-text__headline\">ショッピングカート</h2>\n            <List className={classes.root}>\n                {productInCart.length > 0 && (\n                    productInCart.map(product => <CartListItem key={product.cartId} product={product} />)\n                )}\n            </List>\n            <div className=\"module-spacer--medium\" />\n            <div className=\"p-grid__column\">\n                <PrimaryButton label={'レジへ進む'} onClick={goToOrder} />\n                <div className=\"module-spacer--extra-small\" />\n                <GreyButton label={\"ショッピングを続ける\"} onClick={backToHome} />\n            </div>\n        </section>\n    )\n}\n\nexport default CartList;","import React from 'react';\n\nconst ImagePreview = (props) => {\n    return(\n        <div className=\"p-media__thumb\" onClick={() => props.delete(props.id)}>\n            <img src={props.path} alt=\"プレビュー画像\" />\n        </div>\n    )\n};\n\nexport default ImagePreview;","import React, {useCallback} from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport AddPhotoAlternateIcon from '@material-ui/icons/AddPhotoAlternate';\nimport { makeStyles } from '@material-ui/core';\nimport { storage } from '../../firebase/index';\nimport ImagePreview from './imagePreview';\n\nconst useStyles = makeStyles({\n    icon: {\n        height: 48,\n        width: 48\n    }\n})\n\nconst ImageArea = (props) => {\n    const classes = useStyles();\n\n    const deleteImage = useCallback(async (id) => {\n        const ret = window.confirm('この画像を削除しますか？')\n        if (!ret) {\n            return false\n        } else {\n            const newImages = props.images.filter(image => image.id !== id)\n            props.setImages(newImages);\n            return storage.ref('images').child(id).delete()\n        }\n    }, [props])\n        //props.images, を入れてた。\n\n\n    const uploadImage = useCallback((event) => {\n        const file = event.target.files;\n        let blob = new Blob(file, { type: \"image/jpeg\" });\n    \n        // Generate random 16 digits strings\n        const S =\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n        const N =16;\n        const fileName = Array.from(crypto.getRandomValues(new Uint32Array(N))).map((n)=>S[n%S.length]).join('')\n    \n        const uploadRef = storage.ref('images').child(fileName);\n        const uploadTask = uploadRef.put(blob);\n    \n        uploadTask.then(() => {\n            // Handle successful uploads on complete\n            uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {\n                const newImage = {id: fileName, path: downloadURL};\n                props.setImages((prevState => [...prevState, newImage]))\n            });\n        })\n    }, [props]);\n        //props.setImages, を入れてた。\n    return(\n        <div>\n            <div className=\"p-grid__list-images\">\n                {props.images.length > 0 && (\n                    props.images.map(image => <ImagePreview id={image.id} delete={deleteImage} path={image.path} key={image.id} />)\n                )}\n            </div>\n            <div className=\"u-text-right\">\n                <span>商品画像を登録する</span>\n                <IconButton className={classes.icon}>\n                    <label>\n                        <AddPhotoAlternateIcon />\n                        <input \n                            className=\"u-display-none\" type=\"file\" id=\"image\" \n                            onChange={(event) => uploadImage(event)}\n                        />\n                    </label>\n                </IconButton>\n            </div>\n        </div>\n    )\n};\n\nexport default ImageArea;","import React, { useState, useCallback, useMemo } from 'react';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport Paper from '@material-ui/core/Paper';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport IconButton from '@material-ui/core/IconButton';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { makeStyles } from '@material-ui/styles';\nimport { TextInput } from '../UIkit';\n\nconst useStyles = makeStyles({\n    checkIcon: {\n        float: \"right\"\n    },\n    iconCell: {\n        height: 48,\n        width: 48\n    }\n})\n\nconst SetSizeArea = (props) => {\n    const classes = useStyles();\n\n    const [index, setIndex] = useState(0),\n          [size, setSize] = useState(\"\"),\n          [quantity, setQuantity] = useState(0);\n\n    const inputSize = useCallback((event) => {\n        setSize(event.target.value)\n    },[setSize])\n\n    const inputQuantity = useCallback((event) => {\n        setQuantity(event.target.value)\n    },[setQuantity])\n\n    // const memoindex = useCallback((event) => {\n    //     setIndex(event.target.valu)\n    // },[setIndex])\n\n    const addSize = (index, size, quantity) => {\n        if(size === \"\" || quantity === \"\"){\n            return false\n        }else{\n            if(index === props.sizes.length){\n                props.setSizes(prevState => [...prevState, {size: size, quantity: quantity}])\n                setIndex(index + 1)\n                setSize(\"\")\n                setQuantity(0)\n            }else{\n                const newSizes = props.sizes\n                newSizes[index] = {size: size, quantity: quantity}\n                props.setSizes(newSizes)\n                setIndex(newSizes.length)\n                setSize(\"\")\n                setQuantity(0)\n            }\n        }\n    };\n\n    const editSize = (index, size,quantity) => {\n        setIndex(index)\n        setSize(size)\n        setQuantity(quantity)\n    }\n\n    const deleteSize = (deleteIndex) => {\n        const newSizes = props.sizes.filter((item, i) => i !== deleteIndex);\n        props.setSizes(newSizes)\n    };\n\n    const memoIndex = useMemo(() => {\n        setIndex(props.sizes.length)\n    },[props.sizes.length])\n\n    return(\n        <div>\n            <TableContainer component={Paper}>\n                <Table>\n                    <TableHead>\n                        <TableRow>\n                            <TableCell>サイズ</TableCell>\n                            <TableCell>数量</TableCell>\n                            <TableCell className={classes.iconCell} />\n                            <TableCell className={classes.iconCell} />\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        {props.sizes.length > 0 && (\n                            props.sizes.map((item, i) => (\n                                <TableRow key={item.size}>\n                                    <TableCell>{item.size}</TableCell>\n                                    <TableCell>{item.quantity}</TableCell>\n                                    <TableCell>\n                                        <IconButton className={classes.iconCell} onClick={() => editSize(i, item.size, item.quantity)}>\n                                            <EditIcon />\n                                        </IconButton>\n                                    </TableCell>\n                                    <TableCell>\n                                        <IconButton className={classes.iconCell} onClick={() => deleteSize(i)}>\n                                            <DeleteIcon />\n                                        </IconButton>\n                                    </TableCell>\n                                </TableRow>\n                            ))\n                        )}\n                    </TableBody>\n                </Table>\n                <div>\n                    <TextInput\n                        fullWidth={false} label={\"サイズ\"} multikine={false} required={true}\n                        onChange={inputSize} rows={1} value={size} type={\"text\"}\n                    />\n                    <TextInput\n                        fullWidth={false} label={\"数量\"} multikine={false} required={true}\n                        onChange={inputQuantity} rows={1} value={quantity} type={\"number\"}\n                    />\n                </div>\n                <IconButton className={classes.checkIcon} onClick={() => addSize(index, size, quantity)}>\n                    <CheckCircleIcon />\n                </IconButton>\n            </TableContainer>\n        </div>\n    )\n}\n\nexport default SetSizeArea;","import { db, FirebaseTimestamp } from \"../../firebase\";\nimport { push } from \"connected-react-router\";\nimport { deleteProductAction, fetchProductsAction, fetchKeywordAction, fetchSearchProductsAction } from './actions';\n\nconst productsRef = db.collection('products');\n\nexport const deleteProduct = (id) => {\n    return async(dispatch, getState) => {\n        productsRef.doc(id).delete()\n            .then(() => {\n                const prevProducts = getState().products.list;\n                const nextProducts = prevProducts.filter(product => product.id !== id)\n                dispatch(deleteProductAction(nextProducts))\n            })\n    }\n}\n\nexport const fetchKeyword = (keyword) => {\n    return async(dispatch) => {\n        dispatch(fetchKeywordAction(keyword))\n    }\n}\n\nexport const fetchProducts = (gender, category) => {\n    return async(dispatch) => {\n        let query = productsRef.orderBy('updated_at','desc');\n        query = (gender !== \"\") ? query.where('gender', '==', gender) : query;\n        query = (category !== \"\") ? query.where('category', '==', category) : query;\n\n        query.get()\n            .then(snapshots => {\n                const productList = []\n                snapshots.forEach(snapshot => {\n                    const product = snapshot.data();\n                    productList.push(product)\n                })\n                dispatch(fetchProductsAction(productList))\n            })\n    }\n}\n\n// export const fetchSearchProducts = () => {\n//     return async(dispatch) => {\n//         let query = productsRef.orderBy('updated_at','desc');\n\n//         query.get()\n//             .then(snapshots => {\n//                 const productList = []\n//                 snapshots.forEach(snapshot => {\n//                     const product = snapshot.data();\n//                     productList.push(product)\n//                 })\n//                 dispatch(fetchSearchProductsAction(productList))\n//             })\n//     }\n// }\n\nexport const orderProduct = (productInCart, amount) => {\n    return async(dispatch, getState) => {\n        const uid = getState().users.uid;\n        const userRef = db.collection('users').doc(uid);\n        const timestamp = FirebaseTimestamp.now();\n\n        let products = [],\n            soldOutProducts = [];\n\n        const batch = db.batch()\n\n        for(const product of productInCart){\n            const snapshot = await productsRef.doc(product.productId).get()\n            const sizes = snapshot.data().sizes\n\n            const updatedSizes = sizes.map(size => {\n                if(size.size === product.size){\n                    if(size.quantity === 0){\n                        soldOutProducts.push(product.name)\n                        return size\n                    }\n                    return{\n                        size: size.size,\n                        quantity: size.quantity - 1\n                    }\n                } else{\n                    return size\n                }\n            })\n\n            products.push({\n                id: product.productId,\n                images: product.images,\n                name: product.name,\n                price: product.price,\n                size: product.size\n            })\n\n            batch.update(\n                productsRef.doc(product.productId),\n                {sizes: updatedSizes}\n            )\n\n            batch.delete(\n                userRef.collection('cart').doc(product.cartId)\n            )\n        }\n\n        if(soldOutProducts.length > 0){\n            const errorMessage = (soldOutProducts.length > 1) ? soldOutProducts.join('と') : soldOutProducts[0]\n            alert('大変申し訳ありません。'　+ errorMessage + 'が在庫切れとなったため、注文処理を中断しました。')\n            return false\n        }else{\n            batch.commit().then(() => {\n                const orderRef = userRef.collection('orders').doc();\n                const date = timestamp.toDate();\n                const shippingDate = FirebaseTimestamp.fromDate(new Date(date.setDate(date.getDate() + 3)));\n\n                const history = {\n                    amount: amount,\n                    created_at: timestamp,\n                    id: orderRef.id,\n                    products: products,\n                    shipping_date: shippingDate,\n                    updated_at: timestamp\n                }\n                orderRef.set(history)\n                dispatch(push('/order/complete'))\n\n            }).catch(() => {\n                alert('注文処理に失敗しました。通信環境をご確認のうえ、もう一度お試しください。')\n                return false\n            })\n        }\n    }\n}\n\nexport const saveProduct = (id, name, discription, category, gender, price, images, sizes) => {\n    return async(dispatch) => {\n        const timestamp = FirebaseTimestamp.now()\n\n        const data = {\n            category: category,\n            discription: discription,\n            gender: gender,\n            images: images,\n            name: name,\n            price: parseInt(price, 10),\n            sizes: sizes,\n            updated_at: timestamp\n        }\n\n        if(id === \"\"){\n            const ref = productsRef.doc()\n            id = ref.id\n            data.id = id\n            data.created_at = timestamp\n        }\n\n        return productsRef.doc(id).set(data, {merge: true})\n            .then(() => {\n                dispatch(push('/'))\n            }).catch((error) => {\n                throw new Error(error)\n            })\n    }\n}","import React, { useState } from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport NoImages from '../../assets/img/no_image.png';\nimport { push } from  'connected-react-router';\nimport { useDispatch } from 'react-redux';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MOreVertIcon from '@material-ui/icons/MoreVert';\nimport { deleteProduct } from '../../redux/products/operations';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        [theme.breakpoints.down('sm')]:{\n            margin: 8,\n            width: 'calc(50% - 16px)'\n        },\n        [theme.breakpoints.up('sm')]:{\n            margin: 16,\n            width: 'calc(33.3333% - 32px)'\n        }\n    },\n    content: {\n        display: 'flex',\n        padding: '16px 8px',\n        textAlign: 'left',\n        '&:last-child': {\n            paddingBottom: 16\n        }\n    },\n    media: {\n        height: 0,\n        paddingTop: '100%'\n    },\n    price: {\n        color: theme.palette.secondary.main,\n        fontSize: 16\n    },\n    position: {\n        margin: '0 0 0 auto'\n    }\n}));\n\nconst ProductCard = (props) => {\n\n    const classes = useStyles();\n    const dispatch = useDispatch();\n\n    const [anchorEl, setAnchorEl] = useState(null);\n\n    const handleClick = (event) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleClose = () => {\n        setAnchorEl(null)\n    };\n\n    const images = (props.images.length > 0) ? props.images : [{path:NoImages}];\n    const price = props.price.toLocaleString();\n\n    return(\n        <Card className={classes.root}>\n            <CardMedia\n                className={classes.media}\n                image={images[0].path}\n                onClick={() => dispatch(push('/product/' + props.id))}\n            />\n            <CardContent className={classes.content}>\n                <div onClick={() => dispatch(push('/product/' + props.id))}>\n                    <Typography color=\"textSecondary\" component=\"p\">\n                        {props.name}\n                    </Typography>\n                    <Typography className={classes.price} component=\"p\">\n                        ¥{price}\n                    </Typography>\n                </div>\n                <IconButton className={classes.position}  onClick={handleClick}>\n                    <MOreVertIcon />\n                </IconButton>\n                <Menu anchorEl={anchorEl} keepMounted open={Boolean(anchorEl)} onClose={handleClose}>\n                    <MenuItem \n                        onClick={() => {\n                            dispatch(push('/product/edit/' + props.id))\n                            handleClose()\n                        }}\n                    >\n                        編集する\n                    </MenuItem>\n                    <MenuItem\n                        onClick={() => {\n                            dispatch(deleteProduct(props.id))\n                            handleClose()\n                        }}\n                    >\n                        削除する\n                    </MenuItem>\n                </Menu>\n            </CardContent>\n        </Card>\n    )\n}\n\nexport default ProductCard;","import React, { useState } from 'react';\nimport Swiper from 'react-id-swiper';\nimport NoImage from '../../assets/img/no_image.png'\nimport 'swiper/css/swiper.css';\n\nconst ImageSwiper = (props) => {\n    const [params] = useState({\n        pagination: {\n            el: '.swiper-pagination',\n            type: 'bullets',\n            clickable: true,\n            dynamicBullets: true\n        },\n        navigation: {\n            nextEl: '.swiper-button-next',\n            prevEl: '.swiper-button-prev'\n        },\n        loop: true\n    });\n\n    const images = props.images\n\n    return(\n        <Swiper {...params}>\n            {images.length === 0 ? (\n                <div className=\"p-media__thumb\">\n                    <img src={ NoImage } alt=\"No Images\" />\n                </div>\n            ) : (\n                images.map(image => (\n                    <div className=\"p-media__thumb\" key={image.id}>\n                        <img src={ image.path } alt=\"商品画像\" />\n                    </div>\n                ))\n            )}\n        </Swiper>\n    )\n}\n\nexport default ImageSwiper;","import React from 'react' ;\nimport TableContainer from '@material-ui/core/TableContainer';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/styles';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\n\nconst useStyles = makeStyles({\n    iconCell: {\n        padding: 0,\n        height: 48,\n        width: 48\n    },\n})\n\nconst SizeTable = (props) => {\n    const classes = useStyles();\n\n    const sizes = props.sizes\n\n    return (\n        <TableContainer>\n            <Table>\n                <TableBody>\n                    {sizes.length > 0 && (\n                        sizes.map(size => (\n                            <TableRow key={size.size}>\n                                <TableCell component=\"th\" scope=\"row\">\n                                    {size.size}\n                                </TableCell>\n                                <TableCell>\n                                    残り{size.quantity}点\n                                </TableCell>\n                                <TableCell className={classes.iconCell}>\n                                    {size.quantity > 0 ? (\n                                        <IconButton onClick={() => props.addProduct(size.size)}>\n                                            <ShoppingCartIcon />\n                                        </IconButton>\n                                    ) : (\n                                        <div>売切</div>\n                                    )}\n                                </TableCell>\n                                <TableCell className={classes.iconCell}>\n                                    <IconButton onClick={() => props.addProductLike(size.size)}>\n                                        <FavoriteBorderIcon />\n                                    </IconButton>\n                                </TableCell>\n                            </TableRow>\n                        ))\n                    )}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nexport default SizeTable;","import React from 'react';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport { makeStyles } from '@material-ui/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport IconButton from '@material-ui/core/IconButton';\nimport { db } from '../../firebase/index';\nimport { getUserId } from '../../redux/users/selector';\nimport { useSelector } from 'react-redux';\n\nconst useStyles = makeStyles({\n    list: {\n        height: 128,\n    },\n    image: {\n        objectFit: 'cover',\n        margin: 16,\n        height: 96,\n        width: 96\n    },\n    text: {\n        width: '100%'\n    }\n});\n\nconst LikeListItem = (props) => {\n    const classes = useStyles();\n    const product = props.product;\n    const selector = useSelector((state) => state);\n    const uid = getUserId(selector);\n\n    const name = product.name;\n    const image = product.images[0].path;\n    const size = product.size;\n    const price = product.price.toLocaleString();\n\n    const removeProductFromLike = (id) => {\n        db.collection('users').doc(uid).collection('like').doc(id).delete();\n    }\n\n    return(\n        <ListItem className={classes.list}>\n            <ListItemAvatar>\n                <img className={classes.image} src={image} alt=\"商品画像\"/>\n            </ListItemAvatar>\n            <div className={classes.text}>\n                    <ListItemText primary={name} secondary={\"サイズ：\" + size} />\n                    <ListItemText primary={'¥' + price} />\n                </div>\n            <IconButton onClick={() => removeProductFromLike(props.product.likeId)}>\n                <DeleteIcon />\n            </IconButton>\n            <Divider />\n        </ListItem>\n    )\n}\n\nexport default LikeListItem;","import React from 'react';\nimport Divider from '@material-ui/core/Divider';\nimport { TextDetail } from '../UIkit';\nimport { OrderedProducts } from './index';\n\nconst datetimeToString = (date) => {\n    return date.getFullYear() + '-' \n        + ('00' + (date.getMonth()+1)).slice(-2) + \"-\"\n        + ('00' + date.getDate()).slice(-2) + \" \"\n        + ('00' + date.getHours()).slice(-2) + \":\"\n        + ('00' + date.getMinutes()).slice(-2) + \":\"\n        + ('00' + date.getSeconds()).slice(-2)\n}\n\nconst dateToString = (date) => {\n    return date.getFullYear() + '-' \n    + ('00' + (date.getMonth() + 1)).slice(-2) + '-'\n    + ('00' + date.getDate()).slice(-2)\n}\n\n\nconst OrderHistoryItem = (props) => {\n    const order = props.order;\n    const orderedDatetime = datetimeToString(order.updated_at.toDate());\n    const shippingDate = dateToString(order.shipping_date.toDate())\n    const price = \"¥\" + order.amount.toLocaleString();\n\n    return(\n        <div>\n            <div className=\"mudule-spacer--small\" />\n            <TextDetail label={\"注文ID\"} value={order.id} />\n            <TextDetail label={\"注文日時\"} value={orderedDatetime} />\n            <TextDetail label={\"発送予定日\"} value={shippingDate} />\n            <TextDetail label={\"注文金額\"} value={price} />\n            {order.products.length > 0 && (\n                <OrderedProducts products={order.products} />\n            )}\n            <div className=\"mudule-spacer--extra-extra-small\" />\n            <Divider />\n        </div>\n    )\n}\n\nexport default OrderHistoryItem;","import React, { useCallback } from 'react';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles } from '@material-ui/styles';\nimport { PrimaryButton }from '../UIkit';\nimport { useDispatch } from 'react-redux';\nimport { push } from 'connected-react-router';\n\nconst useStyles = makeStyles({\n    list: {\n        background: '#fff',\n        height: 'auto',\n    },\n    image: {\n        objectFit: 'cover',\n        margin: '8px 16px 8px 0',\n        height: 96,\n        width: 96\n    },\n    text: {\n        width: '100%',\n    }\n})\n\nconst OrderedProducts = (props) => {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const products = props.products;\n\n    const goToProoductDetail = useCallback((id) => {\n        dispatch(push('/product/' + id))\n    },[dispatch])\n\n    return(\n        <List>\n            {products.map(product => (\n                <>\n                    <ListItem className={classes.list} key={product.id}>\n                        <ListItemAvatar>\n                            <img className={classes.image} src={product.images[0].path} alt=\"注文履歴\"/>\n                        </ListItemAvatar>\n                        <div className={classes.text}>\n                            <ListItemText\n                                primary={product.name}\n                                secondary={\"サイズ：\" + product.size}\n                            />\n                            <ListItemText\n                                primary={\"¥\" + product.price.toLocaleString()}\n                            />\n                        </div>\n                        <PrimaryButton label={\"商品詳細を見る\"} onClick={() => goToProoductDetail(product.id)} />\n                    </ListItem>\n                    <Divider />\n                </>\n            ))}\n        </List>\n    )\n}\n\nexport default OrderedProducts;","import React from 'react' ;\nimport List from '@material-ui/core/List';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getProductsInLike } from '../redux/users/selector';\nimport { LikeListItem } from '../components/Products';\nimport { GreyButton } from '../components/UIkit';\nimport { push } from 'connected-react-router';\nimport { makeStyles } from '@material-ui/styles';\n\nconst useStyles = makeStyles({\n    root: {\n        margin: '0 auto',\n        maxWidth: 512,\n        width: '100%'\n    }\n});\n\nconst LikeList = () => {\n    const dispatch = useDispatch();\n    const classes = useStyles();\n    const selector = useSelector((state) => state);\n    const productInLike = getProductsInLike(selector);\n\n    const backToHome = () => {\n        dispatch(push('/'))\n    };\n\n    return(\n        <section className=\"c-section-wrapin\">\n            <h2 className=\"u-text__headline\">お気に入り</h2>\n            <List className={classes.root}>\n                {productInLike.length !== 0 ? (\n                    productInLike.map(product => <LikeListItem product={product} />)\n                ) : (\n                    <div>お気に入りの商品はありません。</div>\n                )}\n            </List>\n            <div className=\"module-spacer--medium\" />\n            <div className=\"p-grid__column\">\n                <GreyButton label={\"ショッピングを続ける\"} onClick={backToHome} />\n            </div>\n        </section>\n    )\n}\n\nexport default LikeList;","import { createSelector } from 'reselect';\n\nconst productsSelector = (state) => state.products;\n\nexport const getProducts = createSelector(\n    [productsSelector],\n    state => state.list\n)\n\nexport const getKeyword = createSelector(\n    [productsSelector],\n    state => state.keyword\n)","import React, { useEffect } from 'react';\nimport { ProductCard } from '../components/Products';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchProducts } from '../redux/products/operations';\nimport { getProducts, getKeyword } from '../redux/products/selector';\n\nconst ProductList = () => {\n    const dispatch = useDispatch();\n    const selector = useSelector((state) => state);\n    const products = getProducts(selector);\n    const keyword = getKeyword(selector);\n\n    const query = selector.router.location.search;\n    const gender = /^\\?gender=/.test(query) ? query.split('?gender=')[1] : \"\";\n    const category = /^\\?category=/.test(query) ? query.split('?category=')[1] : \"\";\n\n    useEffect(() => {\n        dispatch(fetchProducts(gender, category))\n    },[query, dispatch]);\n\n    const filters = products.filter((product) => {\n        if(product.name.indexOf(keyword) > -1){\n            return product\n        }\n    });\n\n    return(\n        <section className=\"c-section-wrapin\">\n            <div className=\"p-grid__row\">\n                {filters.map(filter => (\n                    <ProductCard\n                    key={filter.id} id={filter.id} name={filter.name}\n                    images={filter.images} price={filter.price}    \n                />\n                ))}\n            </div>\n        </section>\n    )\n};\n\nexport default ProductList","import React, { useCallback, useState, useEffect } from 'react';\nimport { SelectBox, TextInput, PrimaryButton } from '../components/UIkit';\nimport { useDispatch } from 'react-redux';\nimport { saveProduct } from '../redux/products/operations';\nimport ImageArea from '../components/Products/imageArea'; \nimport { db } from '../firebase/index';\nimport SetSizeArea from '../components/Products/SetSizeArea';\n\nconst ProductEdit = () => {\n    const dispatch = useDispatch();\n    let id = window.location.pathname.split('/product/edit')[1];\n\n    if(id !== \"\"){\n        id = id.split('/')[1];\n    }\n    \n    const [name, setName] = useState(\"\"),\n          [description, setDiscription] = useState(\"\"),\n          [category, setCategory] = useState(\"\"),\n          [categories, setCategories] =useState([]),\n          [gender, setGender] = useState(\"\"),\n          [price, setPrice] = useState(\"\"),\n          [images, setImages] = useState([]),\n          [sizes, setSizes] = useState([]);\n\n    const InputName = useCallback((event) => {\n        setName(event.target.value)\n    },[setName]);\n\n    const InputDiscription = useCallback((event) => {\n        setDiscription(event.target.value)\n    },[setDiscription]);\n\n    const InputPrice = useCallback((event) => {\n        setPrice(event.target.value)\n    },[setPrice]);\n\n    const genders = [\n        {id:\"all\", name:\"すべて\"},\n        {id:\"male\", name:\"メンズ\"},\n        {id:\"female\", name:\"レディース\"}\n    ];\n\n    useEffect(() => {\n       if(id !== \"\"){\n           db.collection('products').doc(id).get()\n                .then(snapshot => {\n                    const data = snapshot.data();\n                    setImages(data.images);\n                    setName(data.name);\n                    setDiscription(data.discription);\n                    setCategory(data.category);\n                    setGender(data.gender);\n                    setPrice(data.price);\n                    setSizes(data.sizes);\n                })\n       } \n    },[id]);\n\n    useEffect(() => {\n        db.collection('categories').orderBy('order', 'asc').get()\n            .then(snapshots => {\n                const list = [];\n                snapshots.forEach(snapshot => {\n                    const data = snapshot.data();\n                    list.push({\n                        id: data.id,\n                        name: data.name\n                    })\n                })\n                setCategories(list)\n            })\n    },[]);\n\n    return(\n        <section>\n            <h2 className=\"u-text__headline u-text-center\">商品の登録と編集</h2>\n            <div className=\"c-section-container\">\n                <ImageArea images={images} setImages={setImages} />\n                <TextInput\n                    fullWidth={true} label={\"商品名\"} multiline={false} required={true}\n                    rows={1} value={name} type={\"text\"} onChange={InputName}\n                />\n                <TextInput\n                    fullWidth={true} label={\"商品説明\"} multiline={true} required={true}\n                    rows={5} value={description} type={\"text\"} onChange={InputDiscription}\n                />\n                <SelectBox\n                    label={\"カテゴリー\"} required={true} options={categories} select={setCategory} value={category}\n                />\n                <SelectBox\n                    label={\"性別\"} required={true} options={genders} select={setGender} value={gender}\n                />\n                <TextInput\n                    fullWidth={true} label={\"価格\"} multiline={false} required={true}\n                    rows={1} value={price} type={\"number\"} onChange={InputPrice}\n                />\n                <div className=\"module-spacer--small\" />\n                <SetSizeArea sizes={sizes} setSizes={setSizes} />\n                <div className=\"module-spacer--small\" />\n                <div className=\"center\">\n                    <PrimaryButton\n                        label={\"商品情報を保存\"} onClick={() => dispatch(saveProduct(id, name, description, category, gender, price, images,sizes))}\n                    />\n                </div>\n            </div>\n        </section>\n    )\n}\n\nexport default ProductEdit;","import React, { useState, useEffect, useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { db, FirebaseTimestamp } from '../firebase';\nimport { makeStyles } from '@material-ui/styles';\nimport HTMLReactParser from 'html-react-parser';\nimport { ImageSwiper, SizeTable } from '../components/Products';\nimport { addProductToCart, addProductToLike } from '../redux/users/operations';\n\nconst useStyles = makeStyles((theme) => ({\n    sliderBox: {\n        [theme.breakpoints.down('sm')]: {\n            margin: '0 auto 24px auto',\n            height: 320,\n            width: 320\n        },\n        [theme.breakpoints.up('md')]: {\n            margin: '0 auto',\n            height: 400,\n            width: 400\n        },\n    },\n    detail: {\n        textAlign: 'left',\n        [theme.breakpoints.down('sm')]: {\n            margin: '0 auto 16px auto',\n            height: 'auto',\n            width: 320\n        },\n        [theme.breakpoints.up('md')]: {\n            margin: '0 auto',\n            height: 'auto',\n            width: 400\n        },\n    },\n    price: {\n        fontSize: 36\n    }\n}))\n\nconst returnCodeToBr = (text) => {\n    if(text === \"\"){\n        return text\n    }else{\n        return HTMLReactParser(text.replace(/\\r?\\n/g, '<br/>'))\n    }\n};\n\n\nconst ProductDetail = () => {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const selector = useSelector((state) => state);\n    const path = selector.router.location.pathname;\n    const id = path.split('/product/')[1];\n\n    const [product, setProduct] = useState(null);\n\n    useEffect(() => {\n        db.collection('products').doc(id).get()\n            .then(doc => {\n                const data = doc.data()\n                setProduct(data)\n            })\n    },[])\n\n    const addProduct = useCallback((selectedSize) => {\n        const timestamp = FirebaseTimestamp.now();\n        dispatch(addProductToCart({\n            added_at: timestamp,\n            discription: product.discription,\n            gender: product.gender,\n            images: product.images,\n            name: product.name,\n            price: product.price,\n            productId: product.id,\n            quantity: 1,\n            size: selectedSize,\n        }))\n    },[product, dispatch])\n\n    const addProductLike = useCallback((selectedSize) => {\n        const timestamp = FirebaseTimestamp.now();\n        dispatch(addProductToLike({\n            added_at: timestamp,\n            discription: product.discription,\n            gender: product.gender,\n            images: product.images,\n            name: product.name,\n            price: product.price,\n            productId: product.id,\n            quantity: 1,\n            size: selectedSize,\n        }))\n    },[product, dispatch])\n\n    return(\n        <section className=\"c-section-wrapin\">\n            {product && (\n                <div className=\"p-grid__row\">\n                    <div className={classes.sliderBox}>\n                        <ImageSwiper images={product.images} />\n                    </div>\n                    <div className={classes.detail}>\n                        <h2 className=\"u-text__headline\">{product.name}</h2>\n                        <p className={classes.price}>{product.price.toLocaleString()}</p>\n                        <div className=\"module-spacer--small\" />\n                        <SizeTable addProduct={addProduct} addProductLike={addProductLike} sizes={product.sizes} />\n                        <div className=\"module-spacer--small\" />\n                        <p>{returnCodeToBr(product.discription)}</p>\n                    </div>\n                </div>\n            )}\n        </section>\n    )\n};\n\nexport default ProductDetail;","import { signInAction, signOutAction, fetchProductsInCartAction, fetchProductsInLikeAction, fetchOrdersHistoryAction } from \"./actions\";\nimport { push } from 'connected-react-router';\nimport { auth, db, FirebaseTimestamp } from '../../firebase/index';\n\nexport const addProductToCart = (addedProduct) => {\n    return async(dispatch,getState) => {\n        const uid = getState().users.uid;\n        const cartRef = db.collection('users').doc(uid).collection('cart').doc();\n        addedProduct['cartId'] = cartRef.id;\n        await cartRef.set(addedProduct)\n        dispatch(push('/'))\n    }\n} \n\nexport const addProductToLike = (addedProduct) => {\n    return async(dispatch,getState) => {\n        const uid = getState().users.uid;\n        const likeRef = db.collection('users').doc(uid).collection('like').doc();\n        addedProduct['likeId'] = likeRef.id;\n        await likeRef.set(addedProduct)\n        dispatch(push('/'))\n    }\n} \n\nexport const fetchOrdersHistory = () => {\n    return async(dispatch, getState) => {\n        const uid = getState().users.uid;\n        const list = [];\n\n        db.collection('users').doc(uid).collection('orders').orderBy('updated_at', 'desc').get()\n            .then((snapshots) => {\n                snapshots.forEach(snapshot => {\n                    const data = snapshot.data()\n                    list.push(data)\n                })\n\n                dispatch(fetchOrdersHistoryAction(list))\n            })\n    }\n}\n\nexport const fetchProductsInCart = (products) => {\n    return async(dispatch) => {\n        dispatch(fetchProductsInCartAction(products))\n    }\n}\n\nexport const fetchProductsInLike = (products) => {\n    return async(dispatch) => {\n        dispatch(fetchProductsInLikeAction(products))\n    }\n}\n\nexport const listenAuthState = () => {\n    return async(dispatch) => {\n        return auth.onAuthStateChanged(user => {\n            if(user){\n                const uid = user.uid\n                    \n                db.collection('users').doc(uid).get()\n                    .then(snapshot => {\n                        const data = snapshot.data()\n\n                        dispatch(signInAction({\n                            isSignedIn: true,\n                            role: data.role,\n                            uid: uid,\n                            username: data.username\n                        }))\n                    })\n            }else{\n                dispatch(push('/signin'))\n            }\n        })\n    }\n}\n\nexport const resetPassword = (email) => {\n    return async(dispatch) => {\n        if(email === \"\"){\n            alert(\"必須項目が未入力です\")\n            return false\n        }else{\n            auth.sendPasswordResetEmail(email)\n                .then(() => {\n                    alert('入力されたアドレスにパスワードリセット用のメールを送信しました。')\n                    dispatch(push('/signin'))\n                }).catch(() => {\n                    alert('パスワードリセットに失敗しました。通信を確認してもう一度お試しください。')\n                })\n        }\n    }\n}\n\n\nexport const signIn = (email, password) => {\n    return async(dispatch) => {\n        if(email === \"\" || password === \"\"){\n            alert(\"必須項目が未入力です\")\n            return false\n        }\n        \n        auth.signInWithEmailAndPassword(email, password)\n            .then(result => {\n                const user = result.user\n\n                if(user){\n                    const uid = user.uid\n                    \n                    db.collection('users').doc(uid).get()\n                        .then(snapshot => {\n                            const data = snapshot.data()\n\n                            dispatch(signInAction({\n                                isSignedIn: true,\n                                role: data.role,\n                                uid: uid,\n                                username: data.username\n                            }))\n\n                            dispatch(push('/'))\n                        })\n                }\n            })\n    }\n}\n\nexport const signUp = (username, email, password, confirmpassword) => {\n    return async (dispatch) => {\n        if(username === \"\" || email === \"\" || password === \"\" || confirmpassword === \"\"){\n            alert(\"必須項目が未入力です\")\n            return false\n        }\n\n        if(password !== confirmpassword){\n            alert(\"パスワードが一致しません。もう一度お試しください。\")\n            return false\n        }\n\n        return auth.createUserWithEmailAndPassword(email, password)\n            .then(result => {\n                const user = result.user\n\n                if(user){\n                    const uid = user.uid\n                    const timestamp = FirebaseTimestamp.now()\n\n                    const userInitialData = {\n                        create_at: timestamp,\n                        email: email,\n                        role: \"customer\",\n                        uid: uid,\n                        updated_at: timestamp,\n                        username: username\n                    }\n\n                    db.collection('users').doc(uid).set(userInitialData)\n                        .then(() => {\n                            dispatch(push('/'))\n                        })\n                }\n            })\n    }\n}\n\nexport const signOut = () => {\n    return async(dispatch) => {\n        auth.signOut()\n            .then(() => {\n                dispatch(signOutAction())\n                dispatch(push('/signin'))\n            })\n    }\n}","import React,{useCallback, useState} from'react';\nimport {TextInput, PrimaryButton} from '../components/UIkit/index';\nimport { signIn } from '../redux/users/operations'; \nimport { useDispatch } from 'react-redux';\nimport { push } from 'connected-react-router';\n// import SignUp from './SignUp';\n// import Reset from './Reset';\n\nconst SignIn = () => {\n    const dispatch = useDispatch();\n\n    const [email, setEmail] = useState(''),\n          [password, setPassword] = useState('');\n\n    const inputEmail = useCallback((event) => {\n        setEmail(event.target.value)\n    },[setEmail]);\n\n    const inputPassword = useCallback((event) => {\n        setPassword(event.target.value)\n    },[setPassword]);\n\n    return(\n        <div className=\"c-section-container\">\n            <h2 className=\"u-text__headline u-text-center\">サインイン</h2>\n            <div className=\"module-spacer--medium\" />\n            <TextInput\n                fullWidth={true} label={\"メールアドレス\"} multiline={false} required={true}\n                rows={1} value={email} type={\"email\"} onChange={inputEmail}\n            />\n            <TextInput\n                fullWidth={true} label={\"パスワード\"} multiline={false} required={true}\n                rows={1} value={password} type={\"password\"} onChange={inputPassword}\n            />\n            <div className=\"module-spacer--medium\" />\n            <div className=\"center\">\n                <PrimaryButton\n                    label={\"Sign In\"} \n                    onClick={() => dispatch(signIn(email, password))}\n                />\n                <div className=\"module-spacer--medium\" />\n                <p onClick={() => dispatch(push('signup'))}>アカウントをお持ちでない方はこちら</p>\n                <p onClick={() => dispatch(push('signin/reset'))}>パスワードをお忘れの方はこちら</p>\n            </div>\n        </div>\n    )\n}\n\nexport default SignIn;","import React,{useCallback, useState} from'react';\nimport {TextInput, PrimaryButton} from '../components/UIkit/index';\nimport { signUp } from '../redux/users/operations'; \nimport { useDispatch } from 'react-redux';\nimport { push } from 'connected-react-router';\n\nconst SignUp = () => {\n    const dispatch = useDispatch();\n\n    const [username, setUsername] = useState(''),\n          [email, setEmail] = useState(''),\n          [password, setPassword] = useState(''),\n          [confirmPassword, setConfirmPassword] = useState('');\n\n    const inputUsername = useCallback((event) => {\n        setUsername(event.target.value)\n    },[setUsername]);\n\n    const inputEmail = useCallback((event) => {\n        setEmail(event.target.value)\n    },[setEmail]);\n\n    const inputPassword = useCallback((event) => {\n        setPassword(event.target.value)\n    },[setPassword]);\n\n    const inputConfirmPassword = useCallback((event) => {\n        setConfirmPassword(event.target.value)\n    },[setConfirmPassword]);\n\n    return(\n        <div className=\"c-section-container\">\n            <h2 className=\"u-text__headline u-text-center\">アカウント登録</h2>\n            <div className=\"module-spacer--medium\" />\n            <TextInput\n                fullWidth={true} label={\"ユーザー名\"} multiline={false} required={true}\n                rows={1} value={username} type={\"text\"} onChange={inputUsername}\n            />\n            <TextInput\n                fullWidth={true} label={\"メールアドレス\"} multiline={false} required={true}\n                rows={1} value={email} type={\"email\"} onChange={inputEmail}\n            />\n            <TextInput\n                fullWidth={true} label={\"パスワード\"} multiline={false} required={true}\n                rows={1} value={password} type={\"password\"} onChange={inputPassword}\n            />\n            <TextInput\n                fullWidth={true} label={\"パスワード（再確認）\"} multiline={false} required={true}\n                rows={1} value={confirmPassword} type={\"password\"} onChange={inputConfirmPassword}\n            />\n            <div className=\"module-spacer--medium\" />\n            <div className=\"center\">\n                <PrimaryButton\n                    label={\"アカウントを登録する\"} \n                    onClick={() => dispatch(signUp(username, email, password, confirmPassword))}\n                />\n                <div className=\"module-spacer--medium\" />\n                <p onClick={() => dispatch(push('signin'))}>アカウントをお持ちの方はこちら</p>\n            </div>\n        </div>\n    )\n}\n\nexport default SignUp","import React,{useCallback, useState} from'react';\nimport {TextInput, PrimaryButton} from '../components/UIkit/index';\nimport { resetPassword } from '../redux/users/operations'; \nimport { useDispatch } from 'react-redux';\nimport { push } from 'connected-react-router';\n\nconst Reset = () => {\n    const dispatch = useDispatch();\n\n    const [email, setEmail] = useState('')\n\n    const inputEmail = useCallback((event) => {\n        setEmail(event.target.value)\n    },[setEmail]);\n\n    return(\n        <div className=\"c-section-container\">\n            <h2 className=\"u-text__headline u-text-center\">パスワードのリセット</h2>\n            <div className=\"module-spacer--medium\" />\n            <TextInput\n                fullWidth={true} label={\"メールアドレス\"} multiline={false} required={true}\n                rows={1} value={email} type={\"email\"} onChange={inputEmail}\n            />\n            <div className=\"module-spacer--medium\" />\n            <div className=\"center\">\n                <PrimaryButton\n                    label={\"Reset Password\"} \n                    onClick={() => dispatch(resetPassword(email))}\n                />\n                <div className=\"module-spacer--medium\" />\n                <p onClick={() => dispatch(push('signin/reset'))}>ログイン画面に戻る</p>\n            </div>\n        </div>\n    )\n}\n\nexport default Reset;","import React, { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getProductsInCart } from '../redux/users/selector';\nimport { makeStyles } from '@material-ui/styles';\nimport { CartListItem } from '../components/Products';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport { PrimaryButton, TextDetail } from '../components/UIkit';\nimport { orderProduct } from '../redux/products/operations';\n\nconst useStyles = makeStyles((theme) => ({\n    detailBox: {\n        margin: '0 auto',\n        [theme.breakpoints.down('sm')]: {\n            width: 320,\n        },\n        [theme.breakpoints.up('sm')]: {\n            width: 512\n        }\n    },\n    orderBox: {\n        border: '1px solid rgba(0,0,0,0.2)',\n        borderRadius: 4,\n        boxShadow: '0 4px 2px 2px rgba(0,0,0,0.2)',\n        height: 256,\n        margin: '24px auto 16px auto',\n        padding: 16,\n        width: 288\n    }\n}));\n\nconst OrderConfirm = () => {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const selector = useSelector((state) => state);\n    const productsInCart = getProductsInCart(selector);\n\n    const subtotal = useMemo(() => {\n        return productsInCart.reduce((sum, product) => sum += product.price,  0)\n    },[productsInCart]);\n\n    const shippingFee = (subtotal >= 10000) ? 0 : 210;\n    const tax = subtotal * 0.1;\n    const total = subtotal + shippingFee + tax;\n\n    const order = useCallback(() => {\n        dispatch(orderProduct(productsInCart, total))\n    },[productsInCart, total,dispatch]) \n\n    return(\n        <section className=\"c-section-wrapin\">\n            <h2 className=\"u-text__headline\">注文の確認</h2>\n            <div className=\"p-grid__row\">\n                <div className={classes.detailBox}>\n                    <List>\n                        {productsInCart.length > 0 && (\n                            productsInCart.map(product => <CartListItem product={product} key={product.cartId} />)\n                        )}\n                    </List>\n                </div>\n                <div className={classes.orderBox}>\n                    <TextDetail label={'商品合計'} value={'¥' + subtotal.toLocaleString()} />\n                    <TextDetail label={'消費税'} value={'¥' + tax} />\n                    <TextDetail label={'送料'} value={'¥' + shippingFee.toLocaleString()} />\n                    <Divider />\n                    <TextDetail label={'合計(税込)'} value={'¥' + total.toLocaleString()} />\n                    <PrimaryButton label={\"注文する\"} onClick={order} />\n                </div>\n            </div>\n        </section>\n    )\n}\n\nexport default OrderConfirm;","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport List from '@material-ui/core/List';\nimport { makeStyles } from '@material-ui/styles';\nimport { getOrdersHistory } from '../redux/users/selector';\nimport { fetchOrdersHistory } from '../redux/users/operations';\nimport { OrderHistoryItem } from '../components/Products';\n\nconst useStyles = makeStyles((theme) => ({\n    orderList: {\n        background: theme.palette.grey[\"100\"],\n        margin: '0 auto',\n        padding: 32,\n        [theme.breakpoints.down('md')]: {\n            width: '100%',\n        },\n        [theme.breakpoints.up('md')]: {\n            width: 768\n        }\n    }\n}))\n\nconst OrderHistory = () => {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const selector = useSelector((state) => state);\n    const orders = getOrdersHistory(selector);\n\n    useEffect(() => {\n        dispatch(fetchOrdersHistory())\n    }, [dispatch]);\n\n    return(\n        <section className=\"c-section-wrapin\">\n            <List className={classes.orderList}>\n                {orders.length > 0 && (\n                    orders.map(order => <OrderHistoryItem key={order.id} order={order} />)\n                )}\n            </List>\n        </section>\n    )\n}\n\nexport default OrderHistory;","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getSignedIn } from './redux/users/selector';\nimport { listenAuthState } from './redux/users/operations';\n\nconst Auth = ({children}) => {\n    const dispatch = useDispatch();\n    const selector = useSelector((state) => state);\n    const isSignedIn = getSignedIn(selector);\n\n    useEffect(() => {\n        if(!isSignedIn){\n            dispatch(listenAuthState())\n        }\n    },[dispatch,isSignedIn]);\n\n    if(!isSignedIn){\n        return <></>\n    }else{\n        return children\n    }\n};\n\nexport default Auth;","import React from 'react';\nimport { Switch, Route } from 'react-router';\nimport { ProductEdit, ProductList, ProductDetail ,SignUp, SignIn, Reset, CartList, LikeList, OrderConfirm, OrderHistory } from './templates';\nimport Auth from './Auth';\n\nconst Router = () => {\n    return (\n        <Switch>\n            <Route exact path={\"/signup\"} component={SignUp} />\n            <Route exact path={\"/signin\"} component={SignIn} />\n            <Route exact path={\"/signin/reset\"} component={Reset} />\n            <Auth>\n                <Route exact path={\"(/)?\"} component={ProductList} />\n                <Route exact path={\"/product/:id\"} component={ProductDetail} />\n                <Route path={\"/product/edit(/:id)?\"} component={ProductEdit} />\n                <Route exact path={\"/cart\"} component={CartList} />\n                <Route exact path={\"/like\"} component={LikeList} />\n                <Route exact path={\"/order/confirm\"} component={OrderConfirm} />\n                <Route exact path={\"/order/history\"} component={OrderHistory} />\n            </Auth>\n        </Switch>\n    );\n};\n\nexport default Router;","import React, { useState, useCallback } from 'react' ;\nimport { makeStyles } from '@material-ui/styles'\nimport AppBar from '@material-ui/core/AppBar';\nimport ToolBar from '@material-ui/core/Toolbar';\nimport logo from '../../assets/img/logo.png';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getSignedIn } from '../../redux/users/selector';\nimport { push } from 'connected-react-router';\nimport { HeaderMenus, ClosableDrawer } from './index';\n\nconst useStyles = makeStyles({\n    root: {\n        flexGrow: 1,\n    },\n    menuBar: {\n        backgroundColor: \"#fff\",\n        color: \"#444\"\n    },\n    toolBar: {\n        margin: \"0 auto\",\n        maxWidth: 1024,\n        width: \"100%\"\n    },\n    iconButtons: {\n        margin: \"0 0 0 auto\"\n    }\n})\n\nconst Header = () => {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const selector = useSelector((state) => state)\n    const isSignedIn = getSignedIn(selector);\n\n    const [open, setOpen] = useState(false);\n\n    const handleDrawerToggle = useCallback((event) => {\n        if(event.type === 'keydown' && (event.key === 'Tab' || event.key ==='Shift')){\n            return;\n        }\n        setOpen(!open)\n    },[setOpen, open]);\n\n    return(\n        <div className={classes.root}>\n            <AppBar potition=\"fixed\" className={classes.menuBar}>\n                <ToolBar className={classes.toolBar}>\n                    <img\n                        src={logo} alt=\"logo\" width=\"128px\"\n                        onClick={() => dispatch(push('/'))}\n                    />\n                    {isSignedIn && (\n                        <div className={classes.iconButtons}>\n                            <HeaderMenus handleDrawerToggle={handleDrawerToggle} />\n                        </div>\n                    )}\n                </ToolBar>\n            </AppBar>\n            <ClosableDrawer open={open} onClose={handleDrawerToggle} />\n        </div>\n    )\n};\n\nexport default Header;","import React, { useEffect } from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport Badge from '@material-ui/core/Badge';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport { getProductsInCart, getProductsInLike, getUserId } from '../../redux/users/selector';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { db } from '../../firebase/index';\nimport { fetchProductsInCart, fetchProductsInLike } from '../../redux/users/operations';\nimport { push } from 'connected-react-router';\n\nconst HeaderMenus = (props) => {\n    const dispatch = useDispatch();\n    const selector = useSelector((state) => state);\n    const uid = getUserId(selector);\n    let productsInCart = getProductsInCart(selector);\n    let productsInLike = getProductsInLike(selector); \n\n    useEffect(() => {\n        const unsubscribe = db.collection('users').doc(uid).collection('cart')\n            .onSnapshot(snapshots => {\n                snapshots.docChanges().forEach(change => {\n                    const product = change.doc.data()\n                    const changeType = change.type;\n\n                    switch(changeType){\n                        case 'added':\n                            productsInCart.push(product)\n                            break;\n                        case 'modified':\n                            const index = productsInCart.findIndex(product => product.cartId === change.doc.id)\n                            productsInCart[index] = product\n                            break;\n                        case 'removed':\n                            productsInCart = productsInCart.filter(product => product.cartId !== change.doc.id)\n                            break;\n                        default:\n                            break;\n                    }\n                })\n                dispatch(fetchProductsInCart(productsInCart))\n            })\n\n        return () => unsubscribe()\n    },[]);\n\n    useEffect(() => {\n        const unsubscribe = db.collection('users').doc(uid).collection('like')\n            .onSnapshot(snapshots => {\n                snapshots.docChanges().forEach(change => {\n                    const product = change.doc.data()\n                    const changeType = change.type;\n\n                    switch(changeType){\n                        case 'added':\n                            productsInLike.push(product)\n                            break;\n                        case 'modified':\n                            const index = productsInLike.findIndex(product => product.likeId === change.doc.id)\n                            productsInLike[index] = product\n                            break;\n                        case 'removed':\n                            productsInLike = productsInLike.filter(product => product.likeId !== change.doc.id)\n                            break;\n                        default:\n                            break;\n                    }\n                })\n                dispatch(fetchProductsInLike(productsInLike))\n            })\n\n        return () => unsubscribe()\n    },[]);\n\n    return(\n        <>\n            <IconButton onClick={() => dispatch(push('/cart'))}>\n                <Badge badgeContent={productsInCart.length} color=\"secondary\">\n                    <ShoppingCartIcon />\n                </Badge>\n            </IconButton>\n            <IconButton onClick={() => dispatch(push('/like'))}>\n                <Badge badgeContent={productsInLike.length} color=\"secondary\">\n                    <FavoriteBorderIcon />\n                </Badge>\n            </IconButton>\n            <IconButton onClick={(event) => props.handleDrawerToggle(event)}>\n                <MenuIcon />\n            </IconButton>\n        </>\n    )\n};\n\nexport default HeaderMenus;","import React, { useCallback, useState, useEffect } from 'react';\nimport Divider from '@material-ui/core/Divider';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport HistoryIcon from '@material-ui/icons/History';\nimport PersonIcon from '@material-ui/icons/Person';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport { TextInput } from '../UIkit/index';\nimport { useDispatch } from 'react-redux';\nimport { push } from 'connected-react-router';\nimport { signOut } from '../../redux/users/operations';\nimport { fetchKeyword } from '../../redux/products/operations';\nimport { db } from '../../firebase/index';\n\nconst useStyles = makeStyles((theme) => ({\n    drawer: {\n        [theme.breakpoints.up('sm')]: {\n            flexShrink: 0,\n            width: 256,\n        }\n    },\n    toolbar: theme.mixins.toolbar,\n    drawerPaper: {\n        width: 256\n    },\n    searchField: {\n        alignItems: 'center',\n        display: 'flex',\n        marginLeft: 32\n    }\n}))\n\n\nconst ClosableDrawer = (props) => {\n    const classes = useStyles();\n    const {container} = props;\n    const dispatch = useDispatch();\n\n    const [keyword, setKeyword] = useState(\"\");\n\n    const inputKeyword = useCallback((event) => {\n        setKeyword(event.target.value)\n    },[setKeyword])\n\n    const selectMenu = (event, path) => {\n        dispatch(push(path))\n        props.onClose(event)\n    };\n\n    const [filters, setFilters] = useState([\n        {func: selectMenu, label: \"すべて\", id: 'all', value: \"/\"},\n        {func: selectMenu, label: \"メンズ\", id: 'male', value: \"/?gender=male\"},\n        {func: selectMenu, label: \"レディース\", id: 'female', value: \"?gender=female\"},\n    ])\n\n    const menus = [\n        {func: selectMenu, label: \"商品登録\",　icon: <AddCircleIcon />, id: \"register\", value: \"/product/edit\"},\n        {func: selectMenu, label: \"注文履歴\",　icon: <HistoryIcon />, id: \"history\", value: \"/order/history\"},\n        {func: selectMenu, label: \"プロフィール\",　icon: <PersonIcon />, id: \"profile\", value: \"/user/mypage\"},\n    ];\n\n    useEffect(() => {\n        db.collection('categories').orderBy('order', \"asc\").get()\n            .then(snapshots => {\n                const list = [];\n                snapshots.forEach(snapshot => {\n                    const category = snapshot.data();\n                    list.push(\n                        {func: selectMenu, label: category.name, id: category.id, value: `/?category=${category.id}`},\n                    )\n                })\n                setFilters(prevState => [...prevState, ...list]);\n            })\n    },[])\n\n    useEffect(() => {\n        dispatch(fetchKeyword(keyword))\n    },[keyword])\n\n    return(\n        <nav className={classes.drawer}>\n            <Drawer\n                container={container}\n                variant=\"temporary\"\n                anchor=\"right\"\n                open={props.open}\n                onClose={(e) => {props.onClose(e)}}\n                classes={{paper: classes.drawerPaper}}\n                ModalProps={{keepMounted: true}}\n            >\n                <div onClose={(e) => props.onClose(e)}>\n                    <div className={classes.searchField}>\n                        <TextInput\n                            fullWidth={false} label={\"キーワード入力\"} multiline={false}\n                            onChange={inputKeyword} required={false} rows={1} value={keyword} type={\"text\"}\n                        />\n                        <IconButton onClick={() => dispatch(push('/'))} >\n                            <SearchIcon />\n                        </IconButton>\n                    </div>\n                    <Divider />\n                    <List>\n                        {menus.map((menu) => (\n                            <ListItem button key={menu.id} onClick={(e) => menu.func(e, menu.value)}>\n                                <ListItemIcon>\n                                    {menu.icon}\n                                </ListItemIcon>\n                                <ListItemText primary={menu.label} />\n                            </ListItem>\n                        ))}\n                        <ListItem button key=\"logout\" onClick={() => dispatch(signOut())}>\n                            <ListItemIcon>\n                                <ExitToAppIcon />\n                            </ListItemIcon>\n                            <ListItemText primary={\"Logout\"} />\n                        </ListItem>\n                    </List>\n                    <Divider />\n                    <List>\n                        {filters.map(filter => (\n                            <ListItem button key={filter.id} onClick={(e) => filter.func(e, filter.value)}>\n                                <ListItemText primary={filter.label} />\n                            </ListItem>\n                        ))}\n                    </List>\n                </div>\n            </Drawer>\n        </nav>\n    )\n}\n\nexport default ClosableDrawer;","import React from 'react';\nimport Router from './Router';\nimport  \"./assets/reset.css\"\nimport  \"./assets/style.css\"\nimport { Header } from './components/Header';\n\nconst App = () => {\n  return (\n    <>\n      <Header />\n      <main className=\"c-main\">\n        <Router />\n      </main>\n    </>\n  )\n};\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport createStore from './redux/store/store';\nimport { ConnectedRouter } from 'connected-react-router';\nimport * as History from 'history'; \nimport { MuiThemeProvider } from '@material-ui/core'\nimport { theme } from './assets/theme';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst history = History.createBrowserHistory();\nexport const store = createStore(history);\n\nReactDOM.render(\n  <Provider store={store}>\n    <ConnectedRouter history={history}>\n      <MuiThemeProvider theme={theme}>\n        <App />\n      </MuiThemeProvider>\n    </ConnectedRouter>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import {\n    createStore as reduxCretateStore,\n    combineReducers,\n    applyMiddleware\n} from 'redux';\nimport { connectRouter, routerMiddleware } from 'connected-react-router';\nimport { UserReducer } from '../users/reducers';\nimport { ProductsReducer } from '../products/reducers';\nimport thunk from 'redux-thunk';\n\nexport default function cretateStore(history) {\n    return reduxCretateStore(\n        combineReducers({\n            router: connectRouter(history),\n            users: UserReducer,\n            products: ProductsReducer\n        }),\n        applyMiddleware(\n            routerMiddleware(history),\n            thunk\n        )\n    );\n}","module.exports = __webpack_public_path__ + \"static/media/no_image.a953fa16.png\";"],"sourceRoot":""}