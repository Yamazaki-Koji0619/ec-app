{"ast":null,"code":"import _toConsumableArray from\"/Users/yamazakikouji/Desktop/ec-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/yamazakikouji/Desktop/ec-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/yamazakikouji/Desktop/ec-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useCallback,useState,useEffect}from'react';import Divider from'@material-ui/core/Divider';import Drawer from'@material-ui/core/Drawer';import List from'@material-ui/core/List';import ListItem from'@material-ui/core/ListItem';import ListItemIcon from'@material-ui/core/ListItemIcon';import ListItemText from'@material-ui/core/ListItemText';import{makeStyles}from'@material-ui/styles';import IconButton from'@material-ui/core/IconButton';import SearchIcon from'@material-ui/icons/Search';import AddCircleIcon from'@material-ui/icons/AddCircle';import HistoryIcon from'@material-ui/icons/History';import PersonIcon from'@material-ui/icons/Person';import ExitToAppIcon from'@material-ui/icons/ExitToApp';import{TextInput}from'../UIkit/index';import{useDispatch}from'react-redux';import{push}from'connected-react-router';import{signOut}from'../../redux/users/operations';import{fetchKeyword}from'../../redux/products/operations';import{db}from'../../firebase/index';var useStyles=makeStyles(function(theme){return{drawer:_defineProperty({},theme.breakpoints.up('sm'),{flexShrink:0,width:256}),toolbar:theme.mixins.toolbar,drawerPaper:{width:256},searchField:{alignItems:'center',display:'flex',marginLeft:32}};});var ClosableDrawer=function ClosableDrawer(props){var classes=useStyles();var container=props.container;var dispatch=useDispatch();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),keyword=_useState2[0],setKeyword=_useState2[1];var inputKeyword=useCallback(function(event){setKeyword(event.target.value);},[setKeyword]);var selectMenu=function selectMenu(event,path){dispatch(push(path));props.onClose(event);};var _useState3=useState([{func:selectMenu,label:\"すべて\",id:'all',value:\"/\"},{func:selectMenu,label:\"メンズ\",id:'male',value:\"/?gender=male\"},{func:selectMenu,label:\"レディース\",id:'female',value:\"?gender=female\"}]),_useState4=_slicedToArray(_useState3,2),filters=_useState4[0],setFilters=_useState4[1];var menus=[{func:selectMenu,label:\"商品登録\",icon:/*#__PURE__*/React.createElement(AddCircleIcon,null),id:\"register\",value:\"/product/edit\"},{func:selectMenu,label:\"注文履歴\",icon:/*#__PURE__*/React.createElement(HistoryIcon,null),id:\"history\",value:\"/order/history\"},{func:selectMenu,label:\"プロフィール\",icon:/*#__PURE__*/React.createElement(PersonIcon,null),id:\"profile\",value:\"/user/mypage\"}];useEffect(function(){db.collection('categories').orderBy('order',\"asc\").get().then(function(snapshots){var list=[];snapshots.forEach(function(snapshot){var category=snapshot.data();list.push({func:selectMenu,label:category.name,id:category.id,value:\"/?category=\".concat(category.id)});});setFilters(function(prevState){return[].concat(_toConsumableArray(prevState),list);});});},[]);useEffect(function(){dispatch(fetchKeyword(keyword));},[keyword]);return/*#__PURE__*/React.createElement(\"nav\",{className:classes.drawer},/*#__PURE__*/React.createElement(Drawer,{container:container,variant:\"temporary\",anchor:\"right\",open:props.open,onClose:function onClose(e){props.onClose(e);},classes:{paper:classes.drawerPaper},ModalProps:{keepMounted:true}},/*#__PURE__*/React.createElement(\"div\",{onClose:function onClose(e){return props.onClose(e);}},/*#__PURE__*/React.createElement(\"div\",{className:classes.searchField},/*#__PURE__*/React.createElement(TextInput,{fullWidth:false,label:\"キーワード入力\",multiline:false,onChange:inputKeyword,required:false,rows:1,value:keyword,type:\"text\"}),/*#__PURE__*/React.createElement(IconButton,{onClick:function onClick(){return dispatch(push('/'));}},/*#__PURE__*/React.createElement(SearchIcon,null))),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(List,null,menus.map(function(menu){return/*#__PURE__*/React.createElement(ListItem,{button:true,key:menu.id,onClick:function onClick(e){return menu.func(e,menu.value);}},/*#__PURE__*/React.createElement(ListItemIcon,null,menu.icon),/*#__PURE__*/React.createElement(ListItemText,{primary:menu.label}));}),/*#__PURE__*/React.createElement(ListItem,{button:true,key:\"logout\",onClick:function onClick(){return dispatch(signOut());}},/*#__PURE__*/React.createElement(ListItemIcon,null,/*#__PURE__*/React.createElement(ExitToAppIcon,null)),/*#__PURE__*/React.createElement(ListItemText,{primary:\"Logout\"}))),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(List,null,filters.map(function(filter){return/*#__PURE__*/React.createElement(ListItem,{button:true,key:filter.id,onClick:function onClick(e){return filter.func(e,filter.value);}},/*#__PURE__*/React.createElement(ListItemText,{primary:filter.label}));})))));};export default ClosableDrawer;","map":{"version":3,"sources":["/Users/yamazakikouji/Desktop/ec-app/src/components/Header/ClosableDrawer.jsx"],"names":["React","useCallback","useState","useEffect","Divider","Drawer","List","ListItem","ListItemIcon","ListItemText","makeStyles","IconButton","SearchIcon","AddCircleIcon","HistoryIcon","PersonIcon","ExitToAppIcon","TextInput","useDispatch","push","signOut","fetchKeyword","db","useStyles","theme","drawer","breakpoints","up","flexShrink","width","toolbar","mixins","drawerPaper","searchField","alignItems","display","marginLeft","ClosableDrawer","props","classes","container","dispatch","keyword","setKeyword","inputKeyword","event","target","value","selectMenu","path","onClose","func","label","id","filters","setFilters","menus","icon","collection","orderBy","get","then","snapshots","list","forEach","snapshot","category","data","name","prevState","open","e","paper","keepMounted","map","menu","filter"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, useEffect } from 'react';\nimport Divider from '@material-ui/core/Divider';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport HistoryIcon from '@material-ui/icons/History';\nimport PersonIcon from '@material-ui/icons/Person';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport { TextInput } from '../UIkit/index';\nimport { useDispatch } from 'react-redux';\nimport { push } from 'connected-react-router';\nimport { signOut } from '../../redux/users/operations';\nimport { fetchKeyword } from '../../redux/products/operations';\nimport { db } from '../../firebase/index';\n\nconst useStyles = makeStyles((theme) => ({\n    drawer: {\n        [theme.breakpoints.up('sm')]: {\n            flexShrink: 0,\n            width: 256,\n        }\n    },\n    toolbar: theme.mixins.toolbar,\n    drawerPaper: {\n        width: 256\n    },\n    searchField: {\n        alignItems: 'center',\n        display: 'flex',\n        marginLeft: 32\n    }\n}))\n\n\nconst ClosableDrawer = (props) => {\n    const classes = useStyles();\n    const {container} = props;\n    const dispatch = useDispatch();\n\n    const [keyword, setKeyword] = useState(\"\");\n\n    const inputKeyword = useCallback((event) => {\n        setKeyword(event.target.value)\n    },[setKeyword])\n\n    const selectMenu = (event, path) => {\n        dispatch(push(path))\n        props.onClose(event)\n    };\n\n    const [filters, setFilters] = useState([\n        {func: selectMenu, label: \"すべて\", id: 'all', value: \"/\"},\n        {func: selectMenu, label: \"メンズ\", id: 'male', value: \"/?gender=male\"},\n        {func: selectMenu, label: \"レディース\", id: 'female', value: \"?gender=female\"},\n    ])\n\n    const menus = [\n        {func: selectMenu, label: \"商品登録\",　icon: <AddCircleIcon />, id: \"register\", value: \"/product/edit\"},\n        {func: selectMenu, label: \"注文履歴\",　icon: <HistoryIcon />, id: \"history\", value: \"/order/history\"},\n        {func: selectMenu, label: \"プロフィール\",　icon: <PersonIcon />, id: \"profile\", value: \"/user/mypage\"},\n    ];\n\n    useEffect(() => {\n        db.collection('categories').orderBy('order', \"asc\").get()\n            .then(snapshots => {\n                const list = [];\n                snapshots.forEach(snapshot => {\n                    const category = snapshot.data();\n                    list.push(\n                        {func: selectMenu, label: category.name, id: category.id, value: `/?category=${category.id}`},\n                    )\n                })\n                setFilters(prevState => [...prevState, ...list]);\n            })\n    },[])\n\n    useEffect(() => {\n        dispatch(fetchKeyword(keyword))\n    },[keyword])\n\n    return(\n        <nav className={classes.drawer}>\n            <Drawer\n                container={container}\n                variant=\"temporary\"\n                anchor=\"right\"\n                open={props.open}\n                onClose={(e) => {props.onClose(e)}}\n                classes={{paper: classes.drawerPaper}}\n                ModalProps={{keepMounted: true}}\n            >\n                <div onClose={(e) => props.onClose(e)}>\n                    <div className={classes.searchField}>\n                        <TextInput\n                            fullWidth={false} label={\"キーワード入力\"} multiline={false}\n                            onChange={inputKeyword} required={false} rows={1} value={keyword} type={\"text\"}\n                        />\n                        <IconButton onClick={() => dispatch(push('/'))} >\n                            <SearchIcon />\n                        </IconButton>\n                    </div>\n                    <Divider />\n                    <List>\n                        {menus.map((menu) => (\n                            <ListItem button key={menu.id} onClick={(e) => menu.func(e, menu.value)}>\n                                <ListItemIcon>\n                                    {menu.icon}\n                                </ListItemIcon>\n                                <ListItemText primary={menu.label} />\n                            </ListItem>\n                        ))}\n                        <ListItem button key=\"logout\" onClick={() => dispatch(signOut())}>\n                            <ListItemIcon>\n                                <ExitToAppIcon />\n                            </ListItemIcon>\n                            <ListItemText primary={\"Logout\"} />\n                        </ListItem>\n                    </List>\n                    <Divider />\n                    <List>\n                        {filters.map(filter => (\n                            <ListItem button key={filter.id} onClick={(e) => filter.func(e, filter.value)}>\n                                <ListItemText primary={filter.label} />\n                            </ListItem>\n                        ))}\n                    </List>\n                </div>\n            </Drawer>\n        </nav>\n    )\n}\n\nexport default ClosableDrawer;"]},"metadata":{},"sourceType":"module"}