{"ast":null,"code":"import _slicedToArray from\"/Users/yamazakikouji/Desktop/ec-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/yamazakikouji/Desktop/ec-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useState,useEffect,useCallback}from'react';import{useSelector,useDispatch}from'react-redux';import{db,FirebaseTimestamp}from'../firebase';import{makeStyles}from'@material-ui/styles';import HTMLReactParser from'html-react-parser';import{ImageSwiper,SizeTable}from'../components/Products';import{addProductToCart,addProductToLike}from'../redux/users/operations';var useStyles=makeStyles(function(theme){var _sliderBox,_detail;return{sliderBox:(_sliderBox={},_defineProperty(_sliderBox,theme.breakpoints.down('sm'),{margin:'0 auto 24px auto',height:320,width:320}),_defineProperty(_sliderBox,theme.breakpoints.up('md'),{margin:'0 auto',height:400,width:400}),_sliderBox),detail:(_detail={textAlign:'left'},_defineProperty(_detail,theme.breakpoints.down('sm'),{margin:'0 auto 16px auto',height:'auto',width:320}),_defineProperty(_detail,theme.breakpoints.up('md'),{margin:'0 auto',height:'auto',width:400}),_detail),price:{fontSize:36}};});var returnCodeToBr=function returnCodeToBr(text){if(text===\"\"){return text;}else{return HTMLReactParser(text.replace(/\\r?\\n/g,'<br/>'));}};var ProductDetail=function ProductDetail(){var classes=useStyles();var dispatch=useDispatch();var selector=useSelector(function(state){return state;});var path=selector.router.location.pathname;var id=path.split('/product/')[1];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];useEffect(function(){db.collection('products').doc(id).get().then(function(doc){var data=doc.data();setProduct(data);});},[]);var addProduct=useCallback(function(selectedSize){var timestamp=FirebaseTimestamp.now();dispatch(addProductToCart({added_at:timestamp,discription:product.discription,gender:product.gender,images:product.images,name:product.name,price:product.price,productId:product.id,quantity:1,size:selectedSize}));},[product,dispatch]);var addProductLike=useCallback(function(selectedSize){var timestamp=FirebaseTimestamp.now();dispatch(addProductToLike({added_at:timestamp,discription:product.discription,gender:product.gender,images:product.images,name:product.name,price:product.price,productId:product.id,quantity:1,size:selectedSize}));},[product,dispatch]);return/*#__PURE__*/React.createElement(\"section\",{className:\"c-section-wrapin\"},product&&/*#__PURE__*/React.createElement(\"div\",{className:\"p-grid__row\"},/*#__PURE__*/React.createElement(\"div\",{className:classes.sliderBox},/*#__PURE__*/React.createElement(ImageSwiper,{images:product.images})),/*#__PURE__*/React.createElement(\"div\",{className:classes.detail},/*#__PURE__*/React.createElement(\"h2\",{className:\"u-text__headline\"},product.name),/*#__PURE__*/React.createElement(\"p\",{className:classes.price},product.price.toLocaleString()),/*#__PURE__*/React.createElement(\"div\",{className:\"module-spacer--small\"}),/*#__PURE__*/React.createElement(SizeTable,{addProduct:addProduct,addProductLike:addProductLike,sizes:product.sizes}),/*#__PURE__*/React.createElement(\"div\",{className:\"module-spacer--small\"}),/*#__PURE__*/React.createElement(\"p\",null,returnCodeToBr(product.discription)))));};export default ProductDetail;","map":{"version":3,"sources":["/Users/yamazakikouji/Desktop/ec-app/src/templates/ProductDetail.jsx"],"names":["React","useState","useEffect","useCallback","useSelector","useDispatch","db","FirebaseTimestamp","makeStyles","HTMLReactParser","ImageSwiper","SizeTable","addProductToCart","addProductToLike","useStyles","theme","sliderBox","breakpoints","down","margin","height","width","up","detail","textAlign","price","fontSize","returnCodeToBr","text","replace","ProductDetail","classes","dispatch","selector","state","path","router","location","pathname","id","split","product","setProduct","collection","doc","get","then","data","addProduct","selectedSize","timestamp","now","added_at","discription","gender","images","name","productId","quantity","size","addProductLike","toLocaleString","sizes"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { db, FirebaseTimestamp } from '../firebase';\nimport { makeStyles } from '@material-ui/styles';\nimport HTMLReactParser from 'html-react-parser';\nimport { ImageSwiper, SizeTable } from '../components/Products';\nimport { addProductToCart, addProductToLike } from '../redux/users/operations';\n\nconst useStyles = makeStyles((theme) => ({\n    sliderBox: {\n        [theme.breakpoints.down('sm')]: {\n            margin: '0 auto 24px auto',\n            height: 320,\n            width: 320\n        },\n        [theme.breakpoints.up('md')]: {\n            margin: '0 auto',\n            height: 400,\n            width: 400\n        },\n    },\n    detail: {\n        textAlign: 'left',\n        [theme.breakpoints.down('sm')]: {\n            margin: '0 auto 16px auto',\n            height: 'auto',\n            width: 320\n        },\n        [theme.breakpoints.up('md')]: {\n            margin: '0 auto',\n            height: 'auto',\n            width: 400\n        },\n    },\n    price: {\n        fontSize: 36\n    }\n}))\n\nconst returnCodeToBr = (text) => {\n    if(text === \"\"){\n        return text\n    }else{\n        return HTMLReactParser(text.replace(/\\r?\\n/g, '<br/>'))\n    }\n};\n\n\nconst ProductDetail = () => {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const selector = useSelector((state) => state);\n    const path = selector.router.location.pathname;\n    const id = path.split('/product/')[1];\n\n    const [product, setProduct] = useState(null);\n\n    useEffect(() => {\n        db.collection('products').doc(id).get()\n            .then(doc => {\n                const data = doc.data()\n                setProduct(data)\n            })\n    },[])\n\n    const addProduct = useCallback((selectedSize) => {\n        const timestamp = FirebaseTimestamp.now();\n        dispatch(addProductToCart({\n            added_at: timestamp,\n            discription: product.discription,\n            gender: product.gender,\n            images: product.images,\n            name: product.name,\n            price: product.price,\n            productId: product.id,\n            quantity: 1,\n            size: selectedSize,\n        }))\n    },[product, dispatch])\n\n    const addProductLike = useCallback((selectedSize) => {\n        const timestamp = FirebaseTimestamp.now();\n        dispatch(addProductToLike({\n            added_at: timestamp,\n            discription: product.discription,\n            gender: product.gender,\n            images: product.images,\n            name: product.name,\n            price: product.price,\n            productId: product.id,\n            quantity: 1,\n            size: selectedSize,\n        }))\n    },[product, dispatch])\n\n    return(\n        <section className=\"c-section-wrapin\">\n            {product && (\n                <div className=\"p-grid__row\">\n                    <div className={classes.sliderBox}>\n                        <ImageSwiper images={product.images} />\n                    </div>\n                    <div className={classes.detail}>\n                        <h2 className=\"u-text__headline\">{product.name}</h2>\n                        <p className={classes.price}>{product.price.toLocaleString()}</p>\n                        <div className=\"module-spacer--small\" />\n                        <SizeTable addProduct={addProduct} addProductLike={addProductLike} sizes={product.sizes} />\n                        <div className=\"module-spacer--small\" />\n                        <p>{returnCodeToBr(product.discription)}</p>\n                    </div>\n                </div>\n            )}\n        </section>\n    )\n};\n\nexport default ProductDetail;"]},"metadata":{},"sourceType":"module"}