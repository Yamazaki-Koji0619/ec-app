{"ast":null,"code":"import _slicedToArray from\"/Users/yamazakikouji/Desktop/ec-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useState,useEffect}from'react';import{SelectBox,TextInput,PrimaryButton}from'../components/UIkit';import{useDispatch}from'react-redux';import{saveProduct}from'../redux/products/operations';import ImageArea from'../components/Products/imageArea';import{db}from'../firebase/index';import SetSizeArea from'../components/Products/SetSizeArea';var ProductEdit=function ProductEdit(){var dispatch=useDispatch();var id=window.location.pathname.split('/product/edit')[1];if(id!==\"\"){id=id.split('/')[1];}var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1],_useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDiscription=_useState4[1],_useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),category=_useState6[0],setCategory=_useState6[1],_useState7=useState([]),_useState8=_slicedToArray(_useState7,2),categories=_useState8[0],setCategories=_useState8[1],_useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),gender=_useState10[0],setGender=_useState10[1],_useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),price=_useState12[0],setPrice=_useState12[1],_useState13=useState([]),_useState14=_slicedToArray(_useState13,2),images=_useState14[0],setImages=_useState14[1],_useState15=useState([]),_useState16=_slicedToArray(_useState15,2),sizes=_useState16[0],setSizes=_useState16[1];var InputName=useCallback(function(event){setName(event.target.value);},[setName]);var InputDiscription=useCallback(function(event){setDiscription(event.target.value);},[setDiscription]);var InputPrice=useCallback(function(event){setPrice(event.target.value);},[setPrice]);var genders=[{id:\"all\",name:\"すべて\"},{id:\"male\",name:\"メンズ\"},{id:\"female\",name:\"レディース\"}];useEffect(function(){if(id!==\"\"){db.collection('products').doc(id).get().then(function(snapshot){var data=snapshot.data();setImages(data.images);setName(data.name);setDiscription(data.discription);setCategory(data.category);setGender(data.gender);setPrice(data.price);setSizes(data.sizes);});}},[id]);useEffect(function(){db.collection('categories').orderBy('order','asc').get().then(function(snapshots){var list=[];snapshots.forEach(function(snapshot){var data=snapshot.data();list.push({id:data.id,name:data.name});});setCategories(list);});},[]);return/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"h2\",{className:\"u-text__headline u-text-center\"},\"\\u5546\\u54C1\\u306E\\u767B\\u9332\\u3068\\u7DE8\\u96C6\"),/*#__PURE__*/React.createElement(\"div\",{className:\"c-section-container\"},/*#__PURE__*/React.createElement(ImageArea,{images:images,setImages:setImages}),/*#__PURE__*/React.createElement(TextInput,{fullWidth:true,label:\"商品名\",multiline:false,required:true,rows:1,value:name,type:\"text\",onChange:InputName}),/*#__PURE__*/React.createElement(TextInput,{fullWidth:true,label:\"商品説明\",multiline:true,required:true,rows:5,value:description,type:\"text\",onChange:InputDiscription}),/*#__PURE__*/React.createElement(SelectBox,{label:\"カテゴリー\",required:true,options:categories,select:setCategory,value:category}),/*#__PURE__*/React.createElement(SelectBox,{label:\"性別\",required:true,options:genders,select:setGender,value:gender}),/*#__PURE__*/React.createElement(TextInput,{fullWidth:true,label:\"価格\",multiline:false,required:true,rows:1,value:price,type:\"number\",onChange:InputPrice}),/*#__PURE__*/React.createElement(\"div\",{className:\"module-spacer--small\"}),/*#__PURE__*/React.createElement(SetSizeArea,{sizes:sizes,setSizes:setSizes}),/*#__PURE__*/React.createElement(\"div\",{className:\"module-spacer--small\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"center\"},/*#__PURE__*/React.createElement(PrimaryButton,{label:\"商品情報を保存\",onClick:function onClick(){return dispatch(saveProduct(id,name,description,category,gender,price,images,sizes));}}))));};export default ProductEdit;","map":{"version":3,"sources":["/Users/yamazakikouji/Desktop/ec-app/src/templates/ProductEdit.jsx"],"names":["React","useCallback","useState","useEffect","SelectBox","TextInput","PrimaryButton","useDispatch","saveProduct","ImageArea","db","SetSizeArea","ProductEdit","dispatch","id","window","location","pathname","split","name","setName","description","setDiscription","category","setCategory","categories","setCategories","gender","setGender","price","setPrice","images","setImages","sizes","setSizes","InputName","event","target","value","InputDiscription","InputPrice","genders","collection","doc","get","then","snapshot","data","discription","orderBy","snapshots","list","forEach","push"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, useEffect } from 'react';\nimport { SelectBox, TextInput, PrimaryButton } from '../components/UIkit';\nimport { useDispatch } from 'react-redux';\nimport { saveProduct } from '../redux/products/operations';\nimport ImageArea from '../components/Products/imageArea'; \nimport { db } from '../firebase/index';\nimport SetSizeArea from '../components/Products/SetSizeArea';\n\nconst ProductEdit = () => {\n    const dispatch = useDispatch();\n    let id = window.location.pathname.split('/product/edit')[1];\n\n    if(id !== \"\"){\n        id = id.split('/')[1];\n    }\n    \n    const [name, setName] = useState(\"\"),\n          [description, setDiscription] = useState(\"\"),\n          [category, setCategory] = useState(\"\"),\n          [categories, setCategories] =useState([]),\n          [gender, setGender] = useState(\"\"),\n          [price, setPrice] = useState(\"\"),\n          [images, setImages] = useState([]),\n          [sizes, setSizes] = useState([]);\n\n    const InputName = useCallback((event) => {\n        setName(event.target.value)\n    },[setName]);\n\n    const InputDiscription = useCallback((event) => {\n        setDiscription(event.target.value)\n    },[setDiscription]);\n\n    const InputPrice = useCallback((event) => {\n        setPrice(event.target.value)\n    },[setPrice]);\n\n    const genders = [\n        {id:\"all\", name:\"すべて\"},\n        {id:\"male\", name:\"メンズ\"},\n        {id:\"female\", name:\"レディース\"}\n    ];\n\n    useEffect(() => {\n       if(id !== \"\"){\n           db.collection('products').doc(id).get()\n                .then(snapshot => {\n                    const data = snapshot.data();\n                    setImages(data.images);\n                    setName(data.name);\n                    setDiscription(data.discription);\n                    setCategory(data.category);\n                    setGender(data.gender);\n                    setPrice(data.price);\n                    setSizes(data.sizes);\n                })\n       } \n    },[id]);\n\n    useEffect(() => {\n        db.collection('categories').orderBy('order', 'asc').get()\n            .then(snapshots => {\n                const list = [];\n                snapshots.forEach(snapshot => {\n                    const data = snapshot.data();\n                    list.push({\n                        id: data.id,\n                        name: data.name\n                    })\n                })\n                setCategories(list)\n            })\n    },[]);\n\n    return(\n        <section>\n            <h2 className=\"u-text__headline u-text-center\">商品の登録と編集</h2>\n            <div className=\"c-section-container\">\n                <ImageArea images={images} setImages={setImages} />\n                <TextInput\n                    fullWidth={true} label={\"商品名\"} multiline={false} required={true}\n                    rows={1} value={name} type={\"text\"} onChange={InputName}\n                />\n                <TextInput\n                    fullWidth={true} label={\"商品説明\"} multiline={true} required={true}\n                    rows={5} value={description} type={\"text\"} onChange={InputDiscription}\n                />\n                <SelectBox\n                    label={\"カテゴリー\"} required={true} options={categories} select={setCategory} value={category}\n                />\n                <SelectBox\n                    label={\"性別\"} required={true} options={genders} select={setGender} value={gender}\n                />\n                <TextInput\n                    fullWidth={true} label={\"価格\"} multiline={false} required={true}\n                    rows={1} value={price} type={\"number\"} onChange={InputPrice}\n                />\n                <div className=\"module-spacer--small\" />\n                <SetSizeArea sizes={sizes} setSizes={setSizes} />\n                <div className=\"module-spacer--small\" />\n                <div className=\"center\">\n                    <PrimaryButton\n                        label={\"商品情報を保存\"} onClick={() => dispatch(saveProduct(id, name, description, category, gender, price, images,sizes))}\n                    />\n                </div>\n            </div>\n        </section>\n    )\n}\n\nexport default ProductEdit;"]},"metadata":{},"sourceType":"module"}